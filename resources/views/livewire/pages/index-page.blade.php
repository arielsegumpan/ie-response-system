<div>
    <!-- Features -->
    <div class="max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14 mx-auto">
        <div class="aspect-w-16 aspect-h-7">
            <div id="hs-pin-leaflet" class="h-100 hs-leaflet z-10 rounded-[1rem] ring-1 ring-neutral-600 dark:ring-neutral-500"></div>
        </div>

        <!-- Grid -->
        <div class="mt-5 lg:mt-16 grid lg:grid-cols-3 gap-8 lg:gap-12">
        <div class="lg:col-span-1">
            <h2 class="font-bold text-2xl md:text-3xl text-gray-800 dark:text-neutral-200">
           Lorem ipsum, dolor sit amet consectetur adipisicing
            </h2>
            <p class="mt-2 md:mt-4 text-gray-500 dark:text-neutral-500">
            Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut vitae voluptate minus doloremque? Debitis doloribus, blanditiis eos eum ratione atque.
            </p>
        </div>
        <!-- End Col -->

        <div class="lg:col-span-2">
            <div class="grid sm:grid-cols-2 gap-8 md:gap-12">
            <!-- Icon Block -->
            <div class="flex gap-x-5">
                <svg class="shrink-0 mt-1 size-6 text-red-600 dark:text-red-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="10" x="3" y="11" rx="2"/><circle cx="12" cy="5" r="2"/><path d="M12 7v4"/><line x1="8" x2="8" y1="16" y2="16"/><line x1="16" x2="16" y1="16" y2="16"/></svg>
                <div class="grow">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white">
                   Lorem, ipsum
                </h3>
                <p class="mt-1 text-gray-600 dark:text-neutral-400">
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Repellendus dolorem ipsa odio.
                </p>
                </div>
            </div>
            <!-- End Icon Block -->

            <!-- Icon Block -->
            <div class="flex gap-x-5">
                <svg class="shrink-0 mt-1 size-6 text-red-600 dark:text-red-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 10v12"/><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z"/></svg>
                <div class="grow">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white">
                    Lorem, ipsum dolor
                </h3>
                <p class="mt-1 text-gray-600 dark:text-neutral-400">
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Repellendus dolorem ipsa odio.
                </p>
                </div>
            </div>
            <!-- End Icon Block -->

            <!-- Icon Block -->
            <div class="flex gap-x-5">
                <svg class="shrink-0 mt-1 size-6 text-red-600 dark:text-red-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
                <div class="grow">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white">
                   Lorem, ipsum dolor
                </h3>
                <p class="mt-1 text-gray-600 dark:text-neutral-400">
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Repellendus dolorem ipsa odio.
                </p>
                </div>
            </div>
            <!-- End Icon Block -->

            <!-- Icon Block -->
            <div class="flex gap-x-5">
                <svg class="shrink-0 mt-1 size-6 text-red-600 dark:text-red-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                <div class="grow">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white">
                    Lorem, ipsum dolor
                </h3>
                <p class="mt-1 text-gray-600 dark:text-neutral-400">
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Repellendus dolorem ipsa odio.
                </p>
                </div>
            </div>
            <!-- End Icon Block -->
            </div>
        </div>
        <!-- End Col -->
        </div>
        <!-- End Grid -->
    </div>
    <!-- End Features -->

    <div class="flex flex-col">
        <div class="-m-1.5 overflow-x-auto">
          <div class="p-1.5 min-w-full inline-block align-middle">
            <div class="border border-gray-200 rounded-lg divide-y divide-gray-200 dark:border-neutral-700 dark:divide-neutral-700">
              <div class="py-3 px-4">
                <div class="relative max-w-xs">
                  <label class="sr-only">Search</label>
                  <input type="text" name="hs-table-with-pagination-search" id="hs-table-with-pagination-search" class="py-1.5 sm:py-2 px-3 ps-9 block w-full border-gray-200 shadow-2xs rounded-lg sm:text-sm focus:z-10 focus:border-red-500 focus:ring-red-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600" placeholder="Search for items">
                  <div class="absolute inset-y-0 start-0 flex items-center pointer-events-none ps-3">
                    <svg class="size-4 text-gray-400 dark:text-neutral-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="11" cy="11" r="8"></circle>
                      <path d="m21 21-4.3-4.3"></path>
                    </svg>
                  </div>
                </div>
              </div>
              <div class="overflow-hidden">
                <table class="min-w-full divide-y divide-gray-200 dark:divide-neutral-700">
                  <thead class="bg-gray-50 dark:bg-neutral-700">
                    <tr>
                      <th scope="col" class="py-3 px-4 pe-0">
                        <div class="flex items-center h-5">
                          <input id="hs-table-pagination-checkbox-all" type="checkbox" class="border-gray-200 rounded-sm text-red-600 focus:ring-red-500 dark:bg-neutral-700 dark:border-neutral-500 dark:checked:bg-red-500 dark:checked:border-red-500 dark:focus:ring-offset-gray-800">
                          <label for="hs-table-pagination-checkbox-all" class="sr-only">Checkbox</label>
                        </div>
                      </th>
                      <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase dark:text-neutral-500">Name</th>
                      <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase dark:text-neutral-500">Age</th>
                      <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase dark:text-neutral-500">Address</th>
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-gray-200 dark:divide-neutral-700">
                    <tr>
                      <td class="py-3 ps-4">
                        <div class="flex items-center h-5">
                          <input id="hs-table-pagination-checkbox-1" type="checkbox" class="border-gray-200 rounded-sm text-red-600 focus:ring-red-500 dark:bg-neutral-800 dark:border-neutral-700 dark:checked:bg-red-500 dark:checked:border-red-500 dark:focus:ring-offset-gray-800">
                          <label for="hs-table-pagination-checkbox-1" class="sr-only">Checkbox</label>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800 dark:text-neutral-200">John Brown</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-neutral-200">45</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-neutral-200">New York No. 1 Lake Park</td>

                    </tr>

                    <tr>
                      <td class="py-3 ps-4">
                        <div class="flex items-center h-5">
                          <input id="hs-table-pagination-checkbox-2" type="checkbox" class="border-gray-200 rounded-sm text-red-600 focus:ring-red-500 dark:bg-neutral-800 dark:border-neutral-700 dark:checked:bg-red-500 dark:checked:border-red-500 dark:focus:ring-offset-gray-800">
                          <label for="hs-table-pagination-checkbox-2" class="sr-only">Checkbox</label>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800 dark:text-neutral-200">Jim Green</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-neutral-200">27</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-neutral-200">London No. 1 Lake Park</td>

                    </tr>

                    <tr>
                      <td class="py-3 ps-4">
                        <div class="flex items-center h-5">
                          <input id="hs-table-pagination-checkbox-3" type="checkbox" class="border-gray-200 rounded-sm text-red-600 focus:ring-red-500 dark:bg-neutral-800 dark:border-neutral-700 dark:checked:bg-red-500 dark:checked:border-red-500 dark:focus:ring-offset-gray-800">
                          <label for="hs-table-pagination-checkbox-3" class="sr-only">Checkbox</label>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800 dark:text-neutral-200">Joe Black</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-neutral-200">31</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-neutral-200">Sidney No. 1 Lake Park</td>

                    </tr>

                    <tr>
                      <td class="py-3 ps-4">
                        <div class="flex items-center h-5">
                          <input id="hs-table-pagination-checkbox-4" type="checkbox" class="border-gray-200 rounded-sm text-red-600 focus:ring-red-500 dark:bg-neutral-800 dark:border-neutral-700 dark:checked:bg-red-500 dark:checked:border-red-500 dark:focus:ring-offset-gray-800">
                          <label for="hs-table-pagination-checkbox-4" class="sr-only">Checkbox</label>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800 dark:text-neutral-200">Edward King</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-neutral-200">16</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-neutral-200">LA No. 1 Lake Park</td>

                    </tr>

                    <tr>
                      <td class="py-3 ps-4">
                        <div class="flex items-center h-5">
                          <input id="hs-table-pagination-checkbox-5" type="checkbox" class="border-gray-200 rounded-sm text-red-600 focus:ring-red-500 dark:bg-neutral-800 dark:border-neutral-700 dark:checked:bg-red-500 dark:checked:border-red-500 dark:focus:ring-offset-gray-800">
                          <label for="hs-table-pagination-checkbox-5" class="sr-only">Checkbox</label>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800 dark:text-neutral-200">Jim Red</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-neutral-200">45</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800 dark:text-neutral-200">Melbourne No. 1 Lake Park</td>

                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="py-1 px-4">
                <nav class="flex items-center space-x-1" aria-label="Pagination">
                  <button type="button" class="p-2.5 min-w-10 inline-flex justify-center items-center gap-x-2 text-sm rounded-full text-gray-800 hover:bg-gray-100 focus:outline-hidden focus:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" aria-label="Previous">
                    <span aria-hidden="true">«</span>
                    <span class="sr-only">Previous</span>
                  </button>
                  <button type="button" class="min-w-10 flex justify-center items-center text-gray-800 hover:bg-gray-100 focus:outline-hidden focus:bg-gray-100 py-2.5 text-sm rounded-full disabled:opacity-50 disabled:pointer-events-none dark:text-white dark:focus:bg-neutral-700 dark:hover:bg-neutral-700" aria-current="page">1</button>
                  <button type="button" class="min-w-10 flex justify-center items-center text-gray-800 hover:bg-gray-100 focus:outline-hidden focus:bg-gray-100 py-2.5 text-sm rounded-full disabled:opacity-50 disabled:pointer-events-none dark:text-white dark:focus:bg-neutral-700 dark:hover:bg-neutral-700">2</button>
                  <button type="button" class="min-w-10 flex justify-center items-center text-gray-800 hover:bg-gray-100 focus:outline-hidden focus:bg-gray-100 py-2.5 text-sm rounded-full disabled:opacity-50 disabled:pointer-events-none dark:text-white dark:focus:bg-neutral-700 dark:hover:bg-neutral-700">3</button>
                  <button type="button" class="p-2.5 min-w-10 inline-flex justify-center items-center gap-x-2 text-sm rounded-full text-gray-800 hover:bg-gray-100 focus:outline-hidden focus:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700" aria-label="Next">
                    <span class="sr-only">Next</span>
                    <span aria-hidden="true">»</span>
                  </button>
                </nav>
              </div>
            </div>
          </div>
        </div>
    </div>


    <!-- Card Blog -->
    <div class="max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14 mx-auto">
        <!-- Title -->
        <div class="max-w-2xl text-center mx-auto mb-10 lg:mb-14">
            <h2 class="text-2xl font-bold md:text-4xl md:leading-tight dark:text-white">Read our latest news and blogs</h2>
            <p class="mt-1 text-gray-600 dark:text-neutral-400">Lorem ipsum dolor sit amet consectetur adipisicing elit. Maxime mollitia, molestiae quas vel sint commodi repudiandae distinctio quisquam repellat.</p>
        </div>
        <!-- End Title -->

        <!-- Grid -->
        <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10 lg:mb-14">
            @foreach ($featuredPosts as $featPost)
            <!-- Card -->
            <a wire:key="blog-{{ $featPost->id }}" class="group flex flex-col bg-white border border-gray-200 shadow-2xs rounded-xl hover:shadow-md focus:outline-hidden focus:shadow-md transition dark:bg-neutral-900 dark:border-neutral-800" href="{{ route('page.blog.show', $featPost->slug) }}">
                <div class="aspect-w-16 aspect-h-9">
                <img class="w-full object-cover rounded-t-xl h-[300px] lg:h-[200px] md:h-[250px]" src="{{ asset(Storage::url($featPost->featured_img)) }}" alt="{{ $featPost->title }}">
                </div>
                <div class="p-4 md:p-5">
                <p class="mt-2 text-xs uppercase text-gray-600 dark:text-neutral-400">
                    {{ $featPost->categories->first()->cat_name ?? 'Uncategorized' }}
                </p>
                <h3 class="mt-2 text-lg font-medium text-gray-800 group-hover:text-red-600 dark:text-neutral-300 dark:group-hover:text-white">
                    {{ $featPost->title }}
                </h3>
                </div>
            </a>
            <!-- End Card -->
            @endforeach
    </div>
    <!-- End Card Blog -->


    @push('scripts')
        <script>
            window.incidents = @json($incidents);
            window.addEventListener('load', () => {
                const map = L.map('hs-pin-leaflet', {
                    center: [10.901002750609775, 123.07139009929351],
                    zoom: 13,
                });

                L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    maxZoom: 19,
                    minZoom: 2,
                    attribution: '© OpenStreetMap contributors'
                }).addTo(map);

                function createPopupContent(inc_name, incident_number, created_at, status, imageArray) {
                    let imagesHtml = '';
                    if (Array.isArray(imageArray)) {
                        imagesHtml = imageArray.map(img => {
                            return `<img class="inline-block size-8 rounded-lg object-cover ring-2 mt-2 ring-white dark:ring-nuetral-400" src="${img.image_url}" alt="Incident Image">`;

                        }).join('');
                    }
                    return `
                    <div class="max-w-[20rem]">
                        <a href="/incidents/${incident_number}">
                            <h3 class="text-lg font-bold text-red-600">
                                ${inc_name.toUpperCase()}
                            </h3>
                        </a>
                        <div class="text-sm text-gray-500 dark:text-neutral-500">
                             ${created_at}
                        </div>
                        <div class="mt-1">
                           <small>
                             <span class="inline-flex items-center gap-x-1.5 px-3 rounded-md text-xs font-medium border ${getStatusClass(status)}">${status.toUpperCase().replace('_', ' ')}</span>
                            </small>
                        </div>
                        <div class="flex -space-x-2">
                            ${ imagesHtml}
                        </div>
                    </div>
                    `;
                }

                function getStatusClass(status) {
                    switch (status.toLowerCase()) {
                        case 'resolved':
                            return 'border-green-500 text-green-500';
                        case 'pending':
                            return 'border-yellow-500 text-yellow-500';
                        case 'in_progress':
                            return 'border-yellow-500 text-yellow-500';
                        default:
                            return 'border-red-500 text-red-500';
                    }
                }


                // Add dynamic markers
                if (window.incidents) {

                    window.incidents.forEach((incident) => {
                        if (incident.location.latitude && incident.location.longitude) {
                            L.marker([incident.location.latitude, incident.location.longitude])
                                .bindPopup(createPopupContent(
                                    incident.type.inc_name,
                                    incident.incident_number,
                                    incident.formatted_created_at,
                                    incident.status,
                                    incident.images
                                ))
                                .addTo(map);
                        }
                    });
                }
            });
        </script>
    @endpush

</div>
